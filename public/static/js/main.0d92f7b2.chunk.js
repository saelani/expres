(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),c=a.n(l),u=a(9),i=a(12),s=(a(76),a(14)),o=a(1),m=a(30),d=a.n(m),p=a(61),f=a.n(p),g=a(60);a.n(g).a.config();var E="http://203.175.11.166:3000",b="Foodstore",v="20000",h="SAELANI",k="saelani@gmail.com",y={account_no:"xxxxx-xxxxxx-333-34",bank_name:"BCA"};function O(){return n.createElement(u.b,{to:"/"},n.createElement("div",{className:"text-red-600 font-bold text-4xl"},b))}function j(){var e,t=Object(s.c)((function(e){return e.auth}));return n.createElement(o.n,{desktop:2,justify:"between",items:"center"},n.createElement("div",null,n.createElement(O,null)),n.createElement("div",{className:"mr-5 text-right"},n.createElement(u.b,{to:t.user?"/account":"/login"},n.createElement("div",{className:"mr-2 inline-block text-red-600 font-bold"},null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.full_name),n.createElement(o.c,{icon:n.createElement(f.a,null)}))))}var w=[{icon:"/images/menus/semua.png",label:"semua",id:""},{icon:"/images/menus/utama.png",label:"utama",id:"utama"},{icon:"/images/menus/minuman.png",label:"minuman",id:"minuman"},{icon:"/images/menus/snack.png",label:"snack",id:"snack"},{icon:"/images/menus/pastry.png",label:"pastry",id:"pastry"}],x=a(7),S=a(2),_=a.n(S),P=a(4),N=a(62),C=a.n(N),I="features/Products/SET_PAGE",T="features/Products/SET_KEYWORD",q="features/Products/SET_CATEGORY",A="features/Products/SET_TAGS",D="features/Products/NEXT_PAGE",R="features/Products/PREV_PAGE",L="features/Products/TOGGLE_TAG",M=a(13),H=a.n(M);function B(){return(B=Object(P.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.get("".concat(E,"/api/products"),{params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=C()((function(e){return B.apply(this,arguments)}),1e3),G=function(){return{type:"features/Products/START_FETCHING_PRODUCT"}},K=function(e){return Object(x.a)({type:"features/Products/SUCCESS_FETCHING_PRODUCT"},e)},U=function(){return{type:"features/Products/ERROR_FETCHING_PRODUCT"}},J=a(26),F=a.n(J),V=a(39),W=a.n(V);function X(e){return e.reduce((function(e,t){return e+t.price*t.qty}),0)}function Y(e){return isNaN(parseInt(e))?"":new Intl.NumberFormat("id-ID",{maximumSignificantDigits:2,style:"currency",currency:"IDR"}).format(e)}function $(e){var t=e.items,a=e.onItemInc,r=e.onItemDec,l=e.onCheckout,c=X(t);return n.createElement("div",null,n.createElement("div",{className:"px-2 border-b mt-5 pb-5"},n.createElement("div",{className:"text-3xl flex items-center text-red-700"},n.createElement(W.a,null),n.createElement("div",{className:"ml-2"},"Keranjang")),n.createElement(o.s,{as:"h5"}," Total: ",Y(c)," "),n.createElement(o.b,{text:"Checkout",fitContainer:!0,iconAfter:n.createElement(F.a,null),disabled:!t.length,onClick:l})),t.length?null:n.createElement("div",{className:"text-center text-sm text-red-900"}," belum ada items di keranjang "),n.createElement("div",{className:"p-2"},t.map((function(e,t){return n.createElement("div",{key:t,className:"mb-2"},n.createElement(o.e,{imgUrl:"".concat(E,"/upload/").concat(e.image_url),name:e.name,qty:e.qty,color:"orange",onInc:function(t){return a(e)},onDec:function(t){return r(e)}}))}))))}var Q={"":[],utama:["burger","pizza","bread"],pastry:["cheese","strawberry","muffin"],snack:["fried","bread","cheese","coffee"],minuman:["coffee","tea","hot","cold"]},Z="features/Cart/ADD_ITEM",ee="features/Cart/REMOVE_ITEM",te="features/Cart/CLEAR_ITEMS",ae="features/Cart/SET_ITEMS";function ne(e){return{type:Z,item:e}}function re(){return{type:te}}function le(e){return{type:ae,items:e}}function ce(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.products})),a=Object(s.c)((function(e){return e.cart})),r=Object(i.g)();return n.useEffect((function(){e(function(){var e=Object(P.a)(_.a.mark((function e(t,a){var n,r,l,c,u,i,s,o,m,d;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(G()),n=a().products.perPage||9,r=a().products.currentPage||1,l=a().products.tags||[],c=a().products.keyword||"",u=a().products.category||"",i={limit:n,skip:r*n-n,q:c,tags:l,category:u},e.prev=7,e.next=10,z(i);case 10:s=e.sent,o=s.data,m=o.data,d=o.count,t(K({data:m,count:d})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),t(U());case 20:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e,t.currentPage,t.keyword,t.category,t.tags]),n.createElement("div",null,n.createElement(o.k,{sidebar:n.createElement(o.p,{items:w,verticalAlign:"top",active:t.category,onChange:function(t){return e(function(e){return{type:q,category:e}}(t))}}),content:n.createElement("div",{className:"md:flex md:flex-row-reverse w-full mr-5 h-full min-h-screen"},n.createElement("div",{className:"w-full md:w-3/4 pl-5 pb-10"},n.createElement(j,null),n.createElement("div",{className:"w-full text-center mb-10 mt-5"},n.createElement(o.i,{fullRound:!0,value:t.keyword,placeholder:"cari makanan favoritmu...",fitContainer:!0,onChange:function(t){var a;e((a=t.target.value,{type:T,keyword:a}))}})),n.createElement("div",{className:"mb-5 pl-2 flex w-3/3 overflow-auto pb-5"},Q[t.category].map((function(a,r){return n.createElement("div",{key:r},n.createElement(o.m,{text:a,icon:a.slice(0,1).toUpperCase(),isActive:t.tags.includes(a),onClick:function(t){return e(function(e){return{type:L,tag:e}}(a))}}))}))),"process"!==t.status||t.data.length?null:n.createElement("div",{className:"flex justify-center"},n.createElement(d.a,{color:"red"})),n.createElement(o.n,{desktop:3,items:"stretch"},t.data.map((function(t,a){return n.createElement("div",{key:a,className:"p-2"},n.createElement(o.f,{title:t.name,imgUrl:"".concat(E,"/upload/").concat(t.image_url),price:t.price,onAddToCart:function(a){return e(ne(t))}}))}))),n.createElement("div",{className:"text-center my-10"},n.createElement(o.l,{totalItems:t.totalItems,page:t.currentPage,perPage:t.perPage,onChange:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{type:I,currentPage:e}}(t))},onNext:function(t){return e({type:D})},onPrev:function(t){return e({type:R})}}))),n.createElement("div",{className:"w-full md:w-1/4 h-full shadow-lg border-r border-white bg-gray-100"},n.createElement($,{items:a,onItemInc:function(t){return e(ne(t))},onItemDec:function(t){return e(function(e){return{type:ee,item:e}}(t))},onCheckout:function(e){return r.push("/checkout")}}))),sidebarSize:80}))}var ue=a(27),ie="features/Auth/USER_LOGIN",se="features/Auth/USER_LOGOUT",oe=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{user:null,token:null};var me=a(10),de="process",pe="success",fe="error",ge={data:[],currentPage:1,totalItems:-1,perPage:6,keyword:"",category:"",tags:[],status:"idle"};var Ee=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];var be,ve,he=a(63),ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,ye=Object(ue.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return{user:t.user,token:t.token};case se:return{user:null,token:null};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return e.find((function(e){return e._id===t.item._id}))?e.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{qty:e._id===t.item._id?e.qty+1:e.qty})})):[].concat(Object(me.a)(e),[Object(x.a)(Object(x.a)({},t.item),{},{qty:1})]);case ee:return e.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{qty:e._id===t.item._id?e.qty-1:e.qty})})).filter((function(e){return e.qty>0}));case te:return[];case ae:return t.items;default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"features/Products/START_FETCHING_PRODUCT":return Object(x.a)(Object(x.a)({},e),{},{status:de,data:[]});case"features/Products/SUCCESS_FETCHING_PRODUCT":return Object(x.a)(Object(x.a)({},e),{},{data:t.data,totalItems:t.count,status:pe});case"features/Products/ERROR_FETCHING_PRODUCT":return Object(x.a)(Object(x.a)({},e),{},{status:fe});case I:return Object(x.a)(Object(x.a)({},e),{},{currentPage:t.currentPage});case T:return Object(x.a)(Object(x.a)({},e),{},{keyword:t.keyword,category:"",tags:[]});case q:return Object(x.a)(Object(x.a)({},e),{},{currentPage:1,tags:[],category:t.category,keyword:""});case A:return Object(x.a)(Object(x.a)({},e),{},{tags:t.tags});case L:return e.tags.includes(t.tag)?Object(x.a)(Object(x.a)({},e),{},{currentPage:1,tags:e.tags.filter((function(e){return e!==t.tag}))}):Object(x.a)(Object(x.a)({},e),{},{currentPage:1,tags:[].concat(Object(me.a)(e.tags),[t.tag])});case D:return Object(x.a)(Object(x.a)({},e),{},{currentPage:e.currentPage+1});case R:return Object(x.a)(Object(x.a)({},e),{},{currentPage:e.currentPage-1});default:return e}}}),Oe=Object(ue.e)(ye,ke(Object(ue.a)(he.a)));function je(e,t){return we.apply(this,arguments)}function we(){return(we=Object(P.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.put("".concat(E,"/api/carts"),{items:a},{headers:{authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(P.a)(_.a.mark((function e(){var t,a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,H.a.get("".concat(E,"/api/carts"),{headers:{authorization:"Bearer ".concat(a)}});case 5:n=e.sent,(r=n.data).error||Oe.dispatch(le(r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){var e=be,t=ve;be=Oe.getState().auth,ve=Oe.getState().cart;var a=be.token;be!==e&&(localStorage.setItem("auth",JSON.stringify(be)),je(a,ve)),ve!==t&&(localStorage.setItem("cart",JSON.stringify(ve)),je(a,ve))}var _e=a(41);function Pe(e){var t=e.children,a=Object(_e.a)(e,["children"]),r=Object(s.c)((function(e){return e.auth})).user;return n.createElement(i.b,a,r?n.createElement(i.a,{to:"/"}):t)}var Ne=function(e){var t=e.children,a=Object(_e.a)(e,["children"]),r=Object(s.c)((function(e){return e.auth})).user;return n.createElement(i.b,a,r?t:n.createElement(i.a,{to:"/login"}))};function Ce(e,t){return{type:ie,user:e,token:t}}function Ie(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(P.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.post("".concat(E,"/auth/register"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(P.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.post("".concat(E,"/auth/login"),{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},a=t.token,e.next=3,H.a.post("".concat(E,"/auth/logout"),null,{headers:{authorization:"Bearer ".concat(a)}}).then((function(e){return localStorage.removeItem("auth"),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){var e=Object(i.g)(),t=Object(s.b)();return n.useEffect((function(){(function(){return De.apply(this,arguments)})().then((function(){return t({type:se})})).then((function(){return e.push("/")}))}),[e,t]),n.createElement(o.j,{size:"small"},n.createElement("div",{className:"text-center flex flex-col justify-center items-center"},n.createElement(d.a,{color:"red"}),n.createElement("br",null),"Logging out ..."))}var Le=a(5);function Me(e){switch(e.status){case"waiting_payment":return n.createElement(o.a,{color:"orange"},"Menunggu pembayaran");case"paid":return n.createElement(o.a,{color:"green"},"Sudah dibayar");case"processing":return n.createElement(o.a,{color:"yellow"},"Sedang diproses");case"in_delivery":return n.createElement(o.a,{color:"blue"},"Dalam pengiriman");case"delivered":return n.createElement(o.a,{color:"green"},"Pesanan diterima");default:return n.createElement("div",null)}}Me.defaultProps={};var He=a(64),Be=a.n(He);function ze(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(P.a)(_.a.mark((function e(t){var a,n,r,l,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},n=a.token,r=t.limit,l=t.page,c=l*r-r,e.next=5,M.get("".concat(E,"/api/orders"),{params:{skip:c,limit:r},headers:{authorization:"Bearer ".concat(n)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},n=a.token,e.next=3,M.post("".concat(E,"/api/orders"),t,{headers:{authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je=[{Header:"",id:"Status",accessor:function(e){return n.createElement("div",null,"#",e.order_number," ",n.createElement("br",null),n.createElement(Me,{status:e.status}))}},{Header:"Items",accessor:function(e){return n.createElement("div",null,e.order_items.map((function(e){return n.createElement("div",{key:e._id},e.name," ",e.qty)})))}},{Header:"Total",accessor:function(e){return n.createElement("div",null,Y(X(e.order_items)+e.delivery_fee))}},{Header:"Invoice",accessor:function(e){return n.createElement("div",null,n.createElement(u.b,{to:"/invoice/".concat(e._id)},n.createElement(o.b,{color:"gray",iconBefore:n.createElement(Be.a,null)},"Invoice")))}}];function Fe(){var e=n.useState([]),t=Object(Le.a)(e,2),a=t[0],r=t[1],l=n.useState(0),c=Object(Le.a)(l,2),u=c[0],i=c[1],s=n.useState("idle"),m=Object(Le.a)(s,2),d=m[0],p=m[1],f=n.useState(1),g=Object(Le.a)(f,2),E=g[0],b=g[1],v=n.useState(10),h=Object(Le.a)(v,2),k=h[0],y=(h[1],n.useCallback(Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("process"),e.next=3,ze({limit:k,page:E});case 3:if(t=e.sent,!(a=t.data).error){e.next=8;break}return p("error"),e.abrupt("return");case 8:p("success"),r(a.data),i(a.count);case 11:case"end":return e.stop()}}),e)}))),[E,k]));return n.useEffect((function(){y()}),[y]),n.createElement(o.j,null,n.createElement(j,null),n.createElement(o.s,{as:"h3"}," Pesanan Anda "),n.createElement("br",null),n.createElement(o.r,{items:a,totalItems:u,columns:Je,onPageChange:function(e){return b(e)},page:E,isLoading:"process"===d}))}var Ve=a(65),We=a.n(Ve),Xe=a(66),Ye=a.n(Xe),$e=a(67),Qe=a.n($e),Ze=function(e){var t=e.children;return n.createElement("div",{className:"text-white text-5xl flex justify-center mb-5"},t)},et=[{label:"Beranda",icon:n.createElement(Ze,null,n.createElement(We.a,null)),url:"/"},{label:"Alamat",icon:n.createElement(Ze,null,n.createElement(Ye.a,null)),url:"/alamat-pengiriman"},{label:"Pesanan",icon:n.createElement(Ze,null,n.createElement(Qe.a,null)),url:"/pesanan"},{label:"Logout",icon:n.createElement(Ze,null,n.createElement(F.a,null)),url:"/logout"}];function tt(){return n.createElement(o.j,null,n.createElement(j,null),n.createElement(o.s,{as:"h3"}," Akun Anda "),n.createElement("br",null),n.createElement(o.n,{desktop:4,tablet:4,mobile:2},et.map((function(e,t){return n.createElement("div",{key:t,className:"px-2 pb-2"},n.createElement(u.b,{to:e.url},n.createElement(o.d,{header:e.icon,body:n.createElement("div",{className:"text-center font-bold text-white"},e.label)})))}))))}function at(){return(at=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},n=a.token,e.next=3,H.a.get("".concat(E,"/api/invoices/").concat(t),{headers:{authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){var e,t,a,r,l,c,u,s,m=n.useState(null),p=Object(Le.a)(m,2),f=p[0],g=p[1],b=n.useState(""),v=Object(Le.a)(b,2),O=v[0],w=v[1],x=n.useState("process"),S=Object(Le.a)(x,2),N=S[0],C=S[1],I=Object(i.h)().params;n.useEffect((function(){(function(e){return at.apply(this,arguments)})(null===I||void 0===I?void 0:I.order_id).then((function(e){var t=e.data;(null===t||void 0===t?void 0:t.error)&&w(t.message||"Terjadi keslahan yang tidak diketahui"),g(t)})).finally((function(){return C("idle")}))}),[I]);var T=n.useState(!0),q=Object(Le.a)(T,2),A=q[0],D=q[1],R=n.useState(!1),L=Object(Le.a)(R,2),M=L[0],B=L[1];if(O.length)return n.createElement(o.j,null,n.createElement(j,null),n.createElement(o.s,{as:"h3"}," Terjadi Kesalahan "),O);if("process"===N)return n.createElement(o.j,null,n.createElement("div",{className:"text-center py-10"},n.createElement("div",{className:"inline-block"},n.createElement(d.a,{color:"red"}))));var z=function(){var e=Object(P.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,H.a.get("".concat(E,"/api/invoices/").concat(null===I||void 0===I?void 0:I.order_id,"/initiate-payment"));case 3:if(t=e.sent,a=t.data.token){e.next=8;break}return B(!0),e.abrupt("return");case 8:D(!1),window.snap.pay(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement(o.j,null,n.createElement(j,null),n.createElement(o.s,{as:"h3"}," Invoice "),n.createElement("br",null),n.createElement(o.r,{showPagination:!1,items:[{label:"Status",value:n.createElement(Me,{status:null===f||void 0===f?void 0:f.payment_status})},{label:"Order ID",value:"#"+(null===f||void 0===f||null===(e=f.order)||void 0===e?void 0:e.order_number)},{label:"Total amount",value:Y(null===f||void 0===f?void 0:f.total)},{label:"Billed to",value:n.createElement("div",null,n.createElement("b",null,null===f||void 0===f||null===(t=f.user)||void 0===t?void 0:t.full_name," ")," ",n.createElement("br",null),null===f||void 0===f||null===(a=f.user)||void 0===a?void 0:a.email," ",n.createElement("br",null)," ",n.createElement("br",null),null===f||void 0===f||null===(r=f.delivery_address)||void 0===r?void 0:r.detail," ",n.createElement("br",null),null===f||void 0===f||null===(l=f.delivery_address)||void 0===l?void 0:l.kelurahan,",",null===f||void 0===f||null===(c=f.delivery_address)||void 0===c?void 0:c.kecamatan," ",n.createElement("br",null),null===f||void 0===f||null===(u=f.delivery_address)||void 0===u?void 0:u.kabupaten," ",n.createElement("br",null),null===f||void 0===f||null===(s=f.delivery_address)||void 0===s?void 0:s.provinsi)},{label:"Payment to",value:n.createElement("div",null,h," ",n.createElement("br",null),k," ",n.createElement("br",null),y.account_no," ",n.createElement("br",null),y.bank_name," ",n.createElement("br",null),"paid"!==f.payment_status?n.createElement(n.Fragment,null,n.createElement(o.b,{onClick:z,disabled:A}," ",A?"Loading ... ":"Bayar dengan Midtrans"," ")):null,M?n.createElement(n.Fragment,null,n.createElement("div",{className:"text-red-400"},"Terjadi kesalahan saat meminta token untuk pembayaran.")):null)}],columns:[{Header:"Invoice",accessor:"label"},{Header:"",accessor:"value"}]}))}var rt=a(68),lt=a.n(rt),ct=a(69),ut=a.n(ct),it=a(48),st=a.n(it),ot=a(70),mt=a.n(ot);function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},n=a.token,e.next=3,H.a.get("".concat(E,"/api/delivery-addresses"),{params:{limit:t.limit,skip:t.page*t.limit-t.limit},headers:{authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")):{},n=a.token,e.next=3,H.a.post(E+"/api/delivery-addresses",t,{headers:{authorization:"Bearer ".concat(n)}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Et="idle",bt="process",vt="success",ht="error";function kt(){var e=n.useState([]),t=Object(Le.a)(e,2),a=t[0],r=t[1],l=n.useState(0),c=Object(Le.a)(l,2),u=c[0],i=c[1],s=n.useState(Et),o=Object(Le.a)(s,2),m=o[0],d=o[1],p=n.useState(1),f=Object(Le.a)(p,2),g=f[0],E=f[1],b=n.useState(10),v=Object(Le.a)(b,2),h=v[0],k=v[1],y=n.useCallback(Object(P.a)(_.a.mark((function e(){var t,a,n,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(bt),e.next=3,dt({page:g,limit:h});case 3:if(t=e.sent,a=t.data,n=a.data,l=a.count,!a.error){e.next=11;break}return d(ht),e.abrupt("return");case 11:d(vt),r(n),i(l);case 14:case"end":return e.stop()}}),e)}))),[g,h]);return n.useEffect((function(){y()}),[y]),{data:a,count:u,status:m,page:g,limit:h,setPage:E,setLimit:k}}var yt=function(e){var t=e.children;return n.createElement("div",{className:"text-3xl flex justify-center"},t)},Ot=[{label:"Item",icon:n.createElement(yt,null,n.createElement(W.a,null))},{label:"Alamat",icon:n.createElement(yt,null,n.createElement(lt.a,null))},{label:"Konfirmasi",icon:n.createElement(yt,null,n.createElement(ut.a,null))}],jt=[{Header:"Nama produk",accessor:function(e){return n.createElement("div",{className:"flex items-center"},n.createElement("img",{src:"".concat(E,"/upload/").concat(e.image_url),width:48,alt:e.name}),e.name)}},{Header:"Jumlah",accessor:"qty"},{Header:"Harga satuan",id:"price",accessor:function(e){return n.createElement("span",null," @ ",Y(e.price)," ")}},{Header:"Harga total",id:"subtotal",accessor:function(e){return n.createElement("div",null,Y(e.price*e.qty))}}],wt=[{Header:"Nama alamat",accessor:function(e){return n.createElement("div",null,e.nama," ",n.createElement("br",null),n.createElement("small",null,e.provinsi,", ",e.kabupaten,", ",e.kecamatan,", ",e.kelurahan," ",n.createElement("br",null),e.detail))}}];function xt(){var e=n.useState(0),t=Object(Le.a)(e,2),a=t[0],r=t[1],l=Object(s.c)((function(e){return e.cart})),c=n.useState(null),m=Object(Le.a)(c,2),d=m[0],p=m[1],f=kt(),g=f.data,E=f.status,b=f.limit,h=f.page,k=f.count,y=f.setPage,O=Object(i.g)(),w=Object(s.b)();function x(){return(x=Object(P.a)(_.a.mark((function e(){var t,a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={delivery_fee:v,delivery_address:d._id},e.next=3,Ke(t);case 3:if(a=e.sent,!(null===(n=a.data)||void 0===n?void 0:n.error)){e.next=7;break}return e.abrupt("return");case 7:O.push("/invoice/".concat(n._id)),w(re());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.length?n.createElement(o.j,null,n.createElement(j,null),n.createElement(o.s,{as:"h3"}," Checkout "),n.createElement(o.q,{steps:Ot,active:a}),0===a?n.createElement("div",null,n.createElement("br",null)," ",n.createElement("br",null),n.createElement(o.r,{items:l,columns:jt,perPage:l.length,showPagination:!1}),n.createElement("br",null),n.createElement("div",{className:"text-right"},n.createElement(o.s,{as:"h4"},"Subtotal: ",Y(X(l))),n.createElement("br",null),n.createElement(o.b,{onClick:function(e){return r(a+1)},color:"red",iconAfter:n.createElement(F.a,null)}," Selanjutnya "))):null,1===a?n.createElement("div",null,n.createElement("br",null),n.createElement("br",null),n.createElement(o.r,{items:g,columns:wt,perPage:b,page:h,onPageChange:function(e){return y(e)},totalItems:k,isLoading:"process"===E,selectable:!0,primaryKey:"_id",selectedRow:d,onSelectRow:function(e){return p(e)}}),g.length||"success"!==E?null:n.createElement("div",{className:"text-center my-10"},n.createElement(u.b,{to:"/alamat-pengiriman/tambah"},"Kamu belum memiliki alamat pengiriman ",n.createElement("br",null)," ",n.createElement("br",null),n.createElement(o.b,null," Tambah alamat "))),n.createElement("br",null)," ",n.createElement("br",null),n.createElement(o.n,{desktop:2,tablet:2,mobile:2},n.createElement("div",null,n.createElement(o.b,{onClick:function(e){return r(a-1)},color:"gray",iconBefore:n.createElement(st.a,null)},"Sebelumnya")),n.createElement("div",{className:"text-right"},n.createElement(o.b,{onClick:function(e){return r(a+1)},disabled:!d,color:"red",iconAfter:n.createElement(F.a,null)},"Selanjutnya")))):null,2===a?n.createElement("div",null,n.createElement(o.r,{columns:[{Header:"",accessor:"label"},{Header:"",accessor:"value"}],items:[{label:"Alamat",value:n.createElement("div",null,d.nama," ",n.createElement("br",null),d.provinsi,", ",d.kabupaten,", ",d.kecamatan,", ",d.kelurahan," ",n.createElement("br",null),d.detail)},{label:"Subtotal",value:Y(X(l))},{label:"Ongkir",value:Y(v)},{label:"Total",value:n.createElement("b",null,Y(X(l)+parseInt(v)))}],showPagination:!1}),n.createElement("br",null),n.createElement(o.n,{desktop:2,tablet:2,mobile:2},n.createElement("div",null,n.createElement(o.b,{onClick:function(e){return r(a-1)},color:"gray",iconBefore:n.createElement(st.a,null)},"Sebelumnya")),n.createElement("div",{className:"text-right"},n.createElement(o.b,{onClick:function(){return x.apply(this,arguments)},color:"red",size:"large",iconBefore:n.createElement(mt.a,null)},"Bayar")))):null):n.createElement(i.a,{to:"/"})}var St=[{Header:"Nama",accessor:"nama"},{Header:"Detail",accessor:function(e){return n.createElement("div",null,e.provinsi,", ",e.kabupaten,", ",e.kecamatan,", ",e.kelurahan," ",n.createElement("br",null),e.detail)}}];function _t(){var e=kt(),t=e.data,a=e.limit,r=e.page,l=e.status,c=e.count,i=e.setPage;return n.createElement(o.j,{size:"large"},n.createElement("div",null,n.createElement(j,null),n.createElement(o.s,{as:"h3"}," Alamat pengiriman "),n.createElement("br",null),n.createElement("div",null,n.createElement(u.b,{to:"alamat-pengiriman/tambah"},n.createElement(o.b,null,"Tambah baru")),n.createElement("br",null),n.createElement("br",null),n.createElement(o.r,{items:t,columns:St,totalItems:c,page:r,perPage:a,isLoading:"process"===l,onPageChange:function(e){return i(e)}})),"success"!==l||t.length?null:n.createElement("div",{className:"text-center p-10"},"Kamu belum menambahkan alamat pengiriman. ",n.createElement("br",null),n.createElement(u.b,{to:"/alamat-pengiriman/tambah"},n.createElement(o.b,null," Tambah Baru ")))))}var Pt=a(32);function Nt(e){var t=e.tingkat,a=e.kodeInduk,r=e.onChange,l=e.value,c=n.useState([]),u=Object(Le.a)(c,2),i=u[0],s=u[1],m=n.useState(!1),d=Object(Le.a)(m,2),p=d[0],f=d[1];return n.useEffect((function(){f(!0),H.a.get("".concat(E,"/api/wilayah/").concat(t,"?kode_induk=").concat(a)).then((function(e){var t=e.data;t.error||s(t)})).finally((function(e){return f(!1)}))}),[a,t]),n.createElement(o.o,{options:i.map((function(e){return{label:e.nama,value:e.kode}})),onChange:r,value:l,isLoading:p,isDisabled:p||!i.length})}Nt.defaultProps={tingkat:"provinsi"};var Ct={required:{value:!0,message:"Nama alamat tidak boleh kosong."},maxLength:{value:500,message:"Panjang nama alamat maksimal 500 karakter"},minLength:{value:5,message:"Panjang nama alamat minimal 5 karakter"}},It={required:{value:!0,message:"Provinsi harus dipilih."}},Tt={required:{value:!0,message:"Kabupaten harus dipilih."}},qt={required:{value:!0,message:"Kecamatan harus dipilih."}},At={required:{value:!0,message:"Kelurahan harus dipilih."}},Dt={required:{value:!0,message:"Detail alamat harus diisi"},maxLength:{value:1e3,message:"Panjang detail alamat maksimal 1000 karakter"}};function Rt(){var e,t,a,r,l,c,u,s,m,d=Object(i.g)(),p=Object(Pt.a)(),f=p.handleSubmit,g=p.register,E=p.errors,b=p.setValue,v=p.watch,h=p.getValues,k=v();n.useEffect((function(){g({name:"provinsi"},It),g({name:"kabupaten"},Tt),g({name:"kecamatan"},qt),g({name:"kelurahan"},At)}),[g]),n.useEffect((function(){b("kabupaten",null),b("kecamatan",null),b("kelurahan",null)}),[k.provinsi,b]),n.useEffect((function(){b("kecamatan",null),b("kelurahan",null)}),[k.kabupaten,b]),n.useEffect((function(){b("kelurahan",null)}),[k.kecamatan,b]);var y=function(e,t){return b(e,t,{shouldValidate:!0,shouldDirty:!0})},O=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={nama:t.nama_alamat,detail:t.detail_alamat,provinsi:t.provinsi.label,kabupaten:t.kabupaten.label,kecamatan:t.kecamatan.label,kelurahan:t.kelurahan.label},e.next=3,ft(a);case 3:if(n=e.sent,!n.data.error){e.next=7;break}return e.abrupt("return");case 7:d.push("/alamat-pengiriman");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement(o.j,null,n.createElement(j,null),n.createElement("br",null),n.createElement("div",null,n.createElement("form",{onSubmit:f(O)},n.createElement(o.g,{label:"Nama alamat",errorMessage:null===(e=E.nama_alamat)||void 0===e?void 0:e.message,color:"black"},n.createElement(o.i,{placeholder:"Nama alamat",fitContainer:!0,name:"nama_alamat",ref:g(Ct)})),n.createElement(o.g,{label:"Provinsi",errorMessage:null===(t=E.provinsi)||void 0===t?void 0:t.message,color:"black"},n.createElement(Nt,{onChange:function(e){return y("provinsi",e)},name:"provinsi",value:h().provinsi})),n.createElement(o.g,{label:"Kabupaten/kota",errorMessage:null===(a=E.kabupaten)||void 0===a?void 0:a.message,color:"black"},n.createElement(Nt,{tingkat:"kabupaten",kodeInduk:null===(r=h().provinsi)||void 0===r?void 0:r.value,onChange:function(e){return y("kabupaten",e)},value:h().kabupaten})),n.createElement(o.g,{label:"Kecamatan",errorMessage:null===(l=E.kecamatan)||void 0===l?void 0:l.message,color:"black"},n.createElement(Nt,{tingkat:"kecamatan",kodeInduk:null===(c=h().kabupaten)||void 0===c?void 0:c.value,onChange:function(e){return y("kecamatan",e)},value:h().kecamatan})),n.createElement(o.g,{label:"Kelurahan",errorMessage:null===(u=E.kelurahan)||void 0===u?void 0:u.message,color:"black"},n.createElement(Nt,{tingkat:"desa",kodeInduk:null===(s=h().kecamatan)||void 0===s?void 0:s.value,onChange:function(e){return y("kelurahan",e)},value:h().kelurahan})),n.createElement(o.g,{label:"Detail alamat",errorMessage:null===(m=E.detail_alamat)||void 0===m?void 0:m.message,color:"black"},n.createElement(o.t,{placeholder:"Detail alamat",fitContainer:!0,name:"detail_alamat",ref:g(Dt)})),n.createElement(o.b,{fitContainer:!0},"Simpan"))))}var Lt={required:{value:!0,message:"Nama lengkap harus diisi."},maxLength:{value:500,message:"Panjang nama lengkap maksimal 500 karakter."}},Mt={required:{value:!0,message:"Email harus diisi."},maxLength:{value:255,message:"Panjang email maksimal 255 karakter."},pattern:{value:/^([\w-.]+@([\w-]+.)+[\w-]{2,4})?$/,message:"Email tidak valid"}},Ht={required:{value:!0,message:"Password harus diisi."},maxLength:{value:255,message:"Panjang password maksimal 255 karakter."}},Bt={required:{value:!0,message:"Konfirmasi password harus diisi."}},zt="idle",Gt="process",Kt="success",Ut="error";function Jt(){var e,t,a,r,l=Object(Pt.a)(),c=l.register,s=l.handleSubmit,m=l.errors,d=l.setError,p=n.useState(zt),f=Object(Le.a)(p,2),g=f[0],E=f[1],b=Object(i.g)(),v=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,n,r,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.password,n=t.password_confirmation,a===n){e.next=3;break}return e.abrupt("return",d("password_confirmation",{type:"equality",message:"Konfirmasi password harus sama dengan password"}));case 3:return E(Gt),e.next=6,Ie(t);case 6:r=e.sent,(l=r.data).error&&(Object.keys(l.fields).forEach((function(e){var t,a;d(e,{type:"server",message:null===(t=l.fields[e])||void 0===t||null===(a=t.properties)||void 0===a?void 0:a.message})})),E(Ut)),E(Kt),b.push("/register/berhasil");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement(o.j,{size:"small"},n.createElement(o.d,{color:"white"},n.createElement("div",{className:"text-center mb-5"},n.createElement(O,null)),n.createElement("form",{onSubmit:s(v)},n.createElement(o.g,{errorMessage:null===(e=m.full_name)||void 0===e?void 0:e.message},n.createElement(o.i,{name:"full_name",placeholder:"Nama Lengkap",fitContainer:!0,ref:c(Lt)})),n.createElement(o.g,{errorMessage:null===(t=m.email)||void 0===t?void 0:t.message},n.createElement(o.i,{name:"email",placeholder:"Email",fitContainer:!0,ref:c(Mt)})),n.createElement(o.g,{errorMessage:null===(a=m.password)||void 0===a?void 0:a.message},n.createElement(o.h,{name:"password",placeholder:"Password",fitContainer:!0,ref:c(Ht)})),n.createElement(o.g,{errorMessage:null===(r=m.password_confirmation)||void 0===r?void 0:r.message},n.createElement(o.h,{name:"password_confirmation",placeholder:"Konfirmasi Password",fitContainer:!0,ref:c(Bt)})),n.createElement(o.b,{size:"large",fitContainer:!0,disabled:g===Gt}," ",g===Gt?"Sedang memproses":"Mendaftar"," ")),n.createElement("div",{className:"text-center mt-2"},"Sudah punya akun? ",n.createElement(u.b,{to:"/login"}," ",n.createElement("b",null," Masuk Sekarang. ")," "))))}function Ft(){return n.createElement(o.j,{size:"small"},n.createElement(o.d,{color:"white"},n.createElement(o.s,{as:"h3"},"Pendaftaran Berhasil"),n.createElement(o.s,null,"Silahkan masuk ke aplikasi"),n.createElement("br",null),n.createElement(u.b,{to:"/login"},n.createElement(o.b,{fitContainer:!0},"Masuk"))))}var Vt={required:{value:!0,message:"Email tidak boleh kosong."},maxLength:{value:255,message:"Panjang email maksimal 255 karakter"}},Wt={required:{value:!0,message:"Password tidak boleh kosong."},maxLength:{value:255,message:"Panjang password maksimal 255 karakter."}},Xt="idle",Yt="process",$t="success",Qt="error";function Zt(){var e,t,a=Object(Pt.a)(),r=a.register,l=a.handleSubmit,c=a.errors,m=a.setError,d=n.useState(Xt),p=Object(Le.a)(d,2),f=p[0],g=p[1],E=Object(s.b)(),b=Object(i.g)(),v=function(){var e=Object(P.a)(_.a.mark((function e(t){var a,n,r,l,c,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,g(Yt),e.next=4,qe(a,n);case 4:r=e.sent,(l=r.data).error?(m("password",{type:"invalidCredential",message:l.message}),g(Qt)):(c=l.user,u=l.token,E(Ce(c,u)),b.push("/")),g($t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement(o.j,{size:"small"},n.createElement("br",null),n.createElement(o.d,{color:"white"},n.createElement("div",{className:"text-center mb-5"},n.createElement(O,null)),n.createElement("form",{onSubmit:l(v)},n.createElement(o.g,{errorMessage:null===(e=c.email)||void 0===e?void 0:e.message},n.createElement(o.i,{placeholder:"email",fitContainer:!0,name:"email",ref:r(Vt)})),n.createElement(o.g,{errorMessage:null===(t=c.password)||void 0===t?void 0:t.message},n.createElement(o.h,{placeholder:"password",name:"password",fitContainer:!0,ref:r(Wt)})),n.createElement(o.b,{fitContainer:!0,size:"large",disabled:"process"===f},"Login")),n.createElement("div",{className:"text-center mt-2"},"Belum punya akun? ",n.createElement(u.b,{to:"/register"},n.createElement("b",null,"Daftar sekarang.")))))}var ea=function(){return r.a.useEffect((function(){Oe.subscribe(Se),function(){xe.apply(this,arguments)}()}),[]),r.a.createElement(s.a,{store:Oe},r.a.createElement(u.a,null,r.a.createElement(i.d,null,r.a.createElement(Ne,{path:"/logout"},r.a.createElement(Re,null)),r.a.createElement(Ne,{path:"/pesanan"},r.a.createElement(Fe,null)),r.a.createElement(Ne,{path:"/account"},r.a.createElement(tt,null)),r.a.createElement(Ne,{path:"/invoice/:order_id"},r.a.createElement(nt,null)),r.a.createElement(Ne,{path:"/checkout"},r.a.createElement(xt,null)),r.a.createElement(Ne,{path:"/alamat-pengiriman/tambah"},r.a.createElement(Rt,null)),r.a.createElement(Ne,{path:"/alamat-pengiriman"},r.a.createElement(_t,null)),r.a.createElement(Pe,{path:"/register/berhasil"},r.a.createElement(Ft,null)),r.a.createElement(Pe,{path:"/register"},r.a.createElement(Jt,null)),r.a.createElement(Pe,{path:"/login"},r.a.createElement(Zt,null)),r.a.createElement(i.b,{path:"/"},r.a.createElement(ce,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(109);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ea,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports=a(110)}},[[71,1,2]]]);
//# sourceMappingURL=main.0d92f7b2.chunk.js.map